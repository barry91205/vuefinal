import{_ as w,S as L,L as P,h as g,a as x,r as p,o as r,c as n,b as t,d as c,w as d,F as h,i as _,j as C,v as k,k as S,e as m,t as a,l as T}from"./index-W2fTsUi5.js";import{P as E}from"./PaginationView-AeELRzxR.js";import{c as R}from"./cartStore-ggZVKP1r.js";/* empty css              */var V={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"kun123",BASE_URL:"/vuefinal/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:y,VITE_PATH:v}=V,I={data(){return{cart:[],products:[],categories:["1貓房","2貓房","4貓房","5貓房"],isLoading:!0,fullPage:!0,loader:"bars",Swal:L,pagination:{},currentCategory:{},searchInput:"",productCategory:"",search:""}},components:{Loading:P,Pagination:E},watch:{"$route.query":{handler(){this.getProducts()},deep:!0}},methods:{getProducts(){this.isLoading=!0;const{category:o=""}=this.$route.query;g.get(`${y}/v2/api/${v}/products?category=${o}`).then(s=>{this.products=s.data.products,this.pagination=s.data.pagination,this.isLoading=!1}).catch(s=>{this.$Swal.fire({icon:"error",title:s.response.data.message})}).finally(()=>{})},getCarts(){g.get(`${y}/v2/api/${v}/cart`).then(o=>{this.cart=o.data.data}).catch(o=>{this.$Swal.fire({icon:"error",title:o.response.data.message})}).finally(()=>{this.isLoading=!1})},productSearch(){this.searchInput!==""?this.products=this.productsSearch:this.getProducts()},productCategoryFilter(o){this.isLoading=!0,this.filterArea=[],this.category=o,this.category?(this.products=this.productsCategoryFilterResults,this.categoryFilterProducts=this.productsCategoryFilterResults,setTimeout(()=>{this.isLoading=!1},1e3)):this.getProductsList()},...x(R,["addToCart","getCart"])},computed:{productsSearch(){return this.products.filter(s=>s.title.toLowerCase().includes(this.searchInput.toLowerCase()))},productsCategoryFilterResults(){return this.products.filter(s=>s.category.toLowerCase().includes(this.category.toLowerCase()))}},mounted(){this.getProducts(),this.getCarts()}},F={class:"bg-primary py-4"},$={class:"container text-info py-6 vl-parent"},U={class:"row py-md-6 py-sm-0"},A={class:"col-md-3 mb-6"},B={class:"position-sticky",style:{top:"5rem"}},D={class:"card text-center bg-secondary mb-2"},N={class:"list-group list-group-flush"},j={class:"list-group-item list"},M={class:"input-group mt-3"},q={class:"col-md-9 col-sm-12"},H={class:"row"},K={class:"col-3"},O={class:"image-container"},z=["src"],G={class:"col-9 position-relative"},J={class:"row mb-4"},Q={class:"col-md-8 col-sm-5 title"},W={class:"py-4"},X={class:"card-title border-bottom mb-2"},Y={class:"card-text mb-4"},Z={class:"badge bg-secondary"},tt={class:"price col-md-4 p-md-3 text-end position-relative col-sm-6 p-sm-2"},st={key:0},et={key:1},ot={class:"text-secondary"},it={class:"card-text mb-7"},at={class:"text-muted"},rt={class:"row"},nt={class:"col-8"},ct={class:"col-md-7 content"},lt={class:"col-4"},dt={class:"btn-group position-absolute",role:"group","aria-label":"Basic outlined example",style:{bottom:"10px",right:"25px"}},ut={type:"button",class:"btn btn-outline-primary btn-sm"},pt=["onClick"];function ht(o,s,gt,_t,i,u){const f=p("Loading"),l=p("RouterLink"),b=p("Pagination");return r(),n(h,null,[s[7]||(s[7]=t("div",{class:"aboutbanner mt-5",style:{"background-image":"url('images/roomforest.jpg')",height:"200px"}},[t("h2",{class:"text-info"},"貓咪旅館。")],-1)),t("div",F,[t("div",$,[c(f,{active:i.isLoading,"onUpdate:active":s[0]||(s[0]=e=>i.isLoading=e),"can-cancel":!1,"is-full-page":i.fullPage,loader:i.loader},null,8,["active","is-full-page","loader"]),t("div",U,[t("div",A,[t("div",B,[t("div",D,[s[4]||(s[4]=t("div",{class:"card-header py-3 text-info"}," 房型類別 ",-1)),t("ul",N,[t("li",j,[c(l,{class:"py-2 nav-link",to:"/products"},{default:d(()=>s[3]||(s[3]=[t("p",{class:"my-auto"},"全部房型",-1)])),_:1})]),(r(!0),n(h,null,_(i.categories,e=>(r(),n("li",{class:"list-group-item list",key:e},[c(l,{class:"py-2 nav-link link-hover",to:`/products?category=${e}`},{default:d(()=>[m(a(e),1)]),_:2},1032,["to"])]))),128))])]),t("div",M,[s[5]||(s[5]=t("span",{class:"input-group-text bg-light border"},[t("i",{class:"bi bi-search my-auto"})],-1)),C(t("input",{type:"search",class:"form-control",placeholder:"輸入房型名稱","aria-label":"Search","onUpdate:modelValue":s[1]||(s[1]=e=>i.searchInput=e),onKeyup:s[2]||(s[2]=S((...e)=>u.productSearch&&u.productSearch(...e),["enter"]))},null,544),[[k,i.searchInput]])])])]),t("div",q,[(r(!0),n(h,null,_(i.products,e=>(r(),n("div",{class:"card mb-3",key:e.id},[t("div",H,[t("div",K,[t("div",O,[c(l,{to:`/product/${e.id}`},{default:d(()=>[t("img",{src:e.imageUrl,class:"rounded-start object-fit-cover",alt:"...",width:"223",height:"300",style:{"z-index":"1"}},null,8,z)]),_:2},1032,["to"])])]),t("div",G,[t("div",J,[t("div",Q,[t("div",W,[t("h5",X,a(e.title),1),t("p",Y,a(e.unit),1),t("span",Z,a(e.category),1)])]),t("div",tt,[e.origin_price===e.price?(r(),n("h3",st,"NT$ "+a(e.price)+"/貓",1)):(r(),n("div",et,[t("h3",ot,"NT$ "+a(e.price)+"/貓",1),t("del",it,[t("small",at,a(e.origin_price)+"/一貓",1)])]))])]),t("div",rt,[t("div",nt,[t("div",ct,a(e.content),1)]),t("div",lt,[t("div",dt,[t("button",ut,[c(l,{to:`/product/${e.id}`,class:"nav-link"},{default:d(()=>s[6]||(s[6]=[m("查看更多")])),_:2},1032,["to"])]),t("button",{type:"button",class:"btn btn-primary",onClick:T(mt=>o.addToCart(e.id),["prevent"])}," 加入購物車 ",8,pt)])])])])])]))),128)),c(b,{pagination:i.pagination,onEmitPages:u.getProducts},null,8,["pagination","onEmitPages"])])])])])],64)}const wt=w(I,[["render",ht]]);export{wt as default};

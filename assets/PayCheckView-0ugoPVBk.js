import{_,h as c,o as l,c as i,b as t,j as p,t as e,F as v,i as m,f,e as a}from"./index-jO9OAIv7.js";var b={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"kun123",BASE_URL:"/vuefinal/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:u,VITE_PATH:h}=b,y={data(){return{order:{},orderId:{},user:{},productsData:[],total:0,isLoading:!0}},methods:{getOrder(){const d=`${u}/v2/api/${h}/order/${this.orderId}`;c.get(d).then(s=>{this.order=s.data.order,this.productsData=s.data.order.products}).catch(()=>{})},payOrder(){const d=`${u}/v2/api/${h}/pay/${this.orderId}`;c.post(d).then(()=>{this.getOrder(),this.$Swal.fire({title:"成功付款",icon:"success",timer:2e3,showConfirmButton:!1}),this.$router.push("/orderfinish")}).catch(s=>{this.$Swal.fire({icon:"error",title:s.response.data.message})})},formatPrice(d){return d.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},created(){this.orderId=this.$route.params.id,this.getOrder()},mounted(){this.getOrder()}},w={class:"bg-primary"},g={class:"container text-info py-6"},x=f('<div class="row"><div class="col-md-3 col-sm-5 py-6"><div class="border-bottom mb-2"><h2>訂單確認。</h2></div></div><div class="col-8"></div></div><div class="row text-center"><div class="col-4 step rounded-start">1.填寫資料</div><div class="col-4 step state">2.確認付款</div><div class="col-4 step rounded-end">3.訂單完成</div></div>',2),O={class:"row py-4"},E={class:"col-md-6 col-sm-12 border-top bg-secondary p-4",style:{height:"100%"}},S=t("h2",null,"訂單人資訊",-1),T=t("hr",null,null,-1),V={class:"table"},I=t("thead",null,null,-1),D=t("th",{scope:"row"},"姓名",-1),k=t("th",{scope:"row"},"電話",-1),B=t("th",{scope:"row"},"Email",-1),j={colspan:"2"},L=t("th",{scope:"row"},"地址",-1),N=t("tr",null,[t("th",{scope:"row"},"匯款方式"),t("td",null,"信用卡")],-1),P=t("tr",null,[t("th",{scope:"row"},"匯款狀態"),t("td",{class:"text-danger"},"尚未付款")],-1),R={class:"col-md-6 col-sm-12 border-top bg-secondary p-4",style:{height:"100%"}},$=t("h2",null,"訂單明細",-1),A=t("hr",null,null,-1),C={class:"d-flex justify-content-between mb-4"},U=t("h5",null,"訂單編號",-1),F={class:"d-flex justify-content-between mb-4"},H=t("h5",null,"訂購日期",-1),M={class:"d-flex justify-content-between mb-4"},q={class:"d-flex justify-content-between"},z=t("h5",null,"共計",-1);function G(d,s,J,K,o,n){return l(),i("div",w,[t("div",g,[x,t("div",O,[t("div",E,[S,T,t("form",{action:"",onSubmit:s[0]||(s[0]=p((...r)=>n.payOrder&&n.payOrder(...r),["prevent"]))},[t("table",V,[I,t("tbody",null,[t("tr",null,[D,t("td",null,e(o.order.user.name),1)]),t("tr",null,[k,t("td",null,e(o.order.user.tel),1)]),t("tr",null,[B,t("td",j,e(o.order.user.email),1)]),t("tr",null,[L,t("td",null,e(o.order.user.address),1)]),N,P])])],32)]),t("div",R,[$,A,t("div",C,[U,t("span",null,e(o.order.id),1)]),t("div",F,[H,t("span",null,e(o.order.create_at),1)]),(l(!0),i(v,null,m(o.productsData,r=>(l(),i("div",{class:"mb-4",key:r.id},[t("div",M,[t("p",null,[a(e(r.product.title),1),t("span",null," x "+e(r.qty),1)]),a("NT$ "+e(r.product.price),1)])]))),128)),t("div",q,[z,t("span",null,"NT$ "+e(o.order.total),1)]),t("button",{type:"submit",class:"btn btn-info rounded-0 w-100 mt-4",onClick:s[1]||(s[1]=(...r)=>n.payOrder&&n.payOrder(...r))},"確認送出")])])])])}const W=_(y,[["render",G]]);export{W as default};

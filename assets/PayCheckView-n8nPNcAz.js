import{_ as p,L as v,h as c,r as f,o as l,c as i,b as t,d as m,j as g,t as r,F as b,i as y,f as w,e as a}from"./index-XLsbWtpN.js";var L={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"kun123",BASE_URL:"/vuefinal/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:u,VITE_PATH:h}=L,x={data(){return{order:{},orderId:{},user:{},productsData:[],total:0,isLoading:!0}},components:{Loading:v},methods:{getOrder(){this.isLoading=!0;const d=`${u}/v2/api/${h}/order/${this.orderId}`;c.get(d).then(e=>{this.order=e.data.order,this.productsData=e.data.order.products,this.isLoading=!1}).catch(()=>{})},payOrder(){const d=`${u}/v2/api/${h}/pay/${this.orderId}`;c.post(d).then(()=>{this.getOrder(),this.$Swal.fire({title:"成功付款",icon:"success",timer:2e3,showConfirmButton:!1}),this.$router.push("/orderfinish")}).catch(e=>{this.$Swal.fire({icon:"error",title:e.response.data.message})})},formatPrice(d){return d.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},created(){this.orderId=this.$route.params.id,this.getOrder()},mounted(){this.getOrder()}},O={class:"bg-primary"},V={class:"container text-info py-6"},E=w('<div class="row"><div class="col-md-3 col-sm-5 py-6"><div class="border-bottom mb-2"><h2>訂單確認。</h2></div></div><div class="col-8"></div></div><div class="row text-center"><div class="col-4 step rounded-start">1.填寫資料</div><div class="col-4 step state">2.確認付款</div><div class="col-4 step rounded-end">3.訂單完成</div></div>',2),S={class:"row py-4"},T={class:"col-md-6 col-sm-12 border-top bg-secondary p-4",style:{height:"100%"}},I=t("h2",null,"訂單人資訊",-1),D=t("hr",null,null,-1),k={class:"table"},B=t("thead",null,null,-1),N=t("th",{scope:"row"},"姓名",-1),P=t("th",{scope:"row"},"電話",-1),j=t("th",{scope:"row"},"Email",-1),R={colspan:"2"},C=t("th",{scope:"row"},"地址",-1),U=t("tr",null,[t("th",{scope:"row"},"匯款方式"),t("td",null,"信用卡")],-1),A=t("tr",null,[t("th",{scope:"row"},"匯款狀態"),t("td",{class:"text-danger"},"尚未付款")],-1),F={class:"col-md-6 col-sm-12 border-top bg-secondary p-4",style:{height:"100%"}},H=t("h2",null,"訂單明細",-1),M=t("hr",null,null,-1),$={class:"d-flex justify-content-between mb-4"},q=t("h5",null,"訂單編號",-1),z={class:"d-flex justify-content-between mb-4"},G=t("h5",null,"訂購日期",-1),J={class:"d-flex justify-content-between mb-4"},K={class:"d-flex justify-content-between"},Q=t("h5",null,"共計",-1);function W(d,e,X,Y,s,n){const _=f("Loading");return l(),i("div",O,[t("div",V,[m(_,{active:s.isLoading,"onUpdate:active":e[0]||(e[0]=o=>s.isLoading=o),"can-cancel":!1,"is-full-page":d.fullPage,loader:d.loader},null,8,["active","is-full-page","loader"]),E,t("div",S,[t("div",T,[I,D,t("form",{action:"",onSubmit:e[1]||(e[1]=g((...o)=>n.payOrder&&n.payOrder(...o),["prevent"]))},[t("table",k,[B,t("tbody",null,[t("tr",null,[N,t("td",null,r(s.order.user.name),1)]),t("tr",null,[P,t("td",null,r(s.order.user.tel),1)]),t("tr",null,[j,t("td",R,r(s.order.user.email),1)]),t("tr",null,[C,t("td",null,r(s.order.user.address),1)]),U,A])])],32)]),t("div",F,[H,M,t("div",$,[q,t("span",null,r(s.order.id),1)]),t("div",z,[G,t("span",null,r(s.order.create_at),1)]),(l(!0),i(b,null,y(s.productsData,o=>(l(),i("div",{class:"mb-4",key:o.id},[t("div",J,[t("p",null,[a(r(o.product.title),1),t("span",null," x "+r(o.qty),1)]),a("NT$ "+r(o.product.price),1)])]))),128)),t("div",K,[Q,t("span",null,"NT$ "+r(s.order.total),1)]),t("button",{type:"submit",class:"btn btn-info rounded-0 w-100 mt-4",onClick:e[2]||(e[2]=(...o)=>n.payOrder&&n.payOrder(...o))},"確認送出")])])])])}const tt=p(x,[["render",W]]);export{tt as default};

import{_ as f,L as m,h as a,r as g,o as n,c as i,b as t,d as b,f as h,l as y,t as o,F as w,i as x,e as u}from"./index-W2fTsUi5.js";var L={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"kun123",BASE_URL:"/vuefinal/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:p,VITE_PATH:c}=L,O={data(){return{order:{},orderId:{},user:{},productsData:[],total:0,isLoading:!0,fullPage:!0,loader:"bars"}},components:{Loading:m},methods:{getOrder(){this.isLoading=!0;const l=`${p}/v2/api/${c}/order/${this.orderId}`;a.get(l).then(s=>{this.order=s.data.order,this.productsData=s.data.order.products,this.isLoading=!1}).catch(()=>{})},payOrder(){const l=`${p}/v2/api/${c}/pay/${this.orderId}`;a.post(l).then(()=>{this.getOrder(),this.$Swal.fire({title:"成功付款",icon:"success",timer:2e3,showConfirmButton:!1}),this.$router.push("/orderfinish")}).catch(s=>{this.$Swal.fire({icon:"error",title:s.response.data.message})})},formatPrice(l){return l.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},created(){this.orderId=this.$route.params.id,this.getOrder()},mounted(){this.getOrder()}},V={class:"bg-primary"},E={class:"container text-info py-6"},S={class:"row py-4"},T={class:"col-md-6 col-sm-12 border-top bg-secondary p-4",style:{height:"100%"}},I={class:"table"},D={colspan:"2"},P={class:"col-md-6 col-sm-12 border-top bg-secondary p-4",style:{height:"100%"}},_={class:"d-flex justify-content-between mb-4"},k={class:"d-flex justify-content-between mb-4"},B={class:"d-flex justify-content-between mb-4"},N={class:"d-flex justify-content-between"};function R(l,s,j,C,e,d){const v=g("Loading");return n(),i("div",V,[t("div",E,[b(v,{active:e.isLoading,"onUpdate:active":s[0]||(s[0]=r=>e.isLoading=r),"can-cancel":!1,"is-full-page":e.fullPage,loader:e.loader},null,8,["active","is-full-page","loader"]),s[17]||(s[17]=h('<div class="row"><div class="col-md-3 col-sm-5 py-6"><div class="border-bottom mb-2"><h2>訂單確認。</h2></div></div><div class="col-8"></div></div><div class="row text-center"><div class="col-4 step rounded-start">1.填寫資料</div><div class="col-4 step state">2.確認付款</div><div class="col-4 step rounded-end">3.訂單完成</div></div>',2)),t("div",S,[t("div",T,[s[10]||(s[10]=t("h2",null,"訂單人資訊",-1)),s[11]||(s[11]=t("hr",null,null,-1)),t("form",{action:"",onSubmit:s[1]||(s[1]=y((...r)=>d.payOrder&&d.payOrder(...r),["prevent"]))},[t("table",I,[s[9]||(s[9]=t("thead",null,null,-1)),t("tbody",null,[t("tr",null,[s[3]||(s[3]=t("th",{scope:"row"},"姓名",-1)),t("td",null,o(e.order.user.name),1)]),t("tr",null,[s[4]||(s[4]=t("th",{scope:"row"},"電話",-1)),t("td",null,o(e.order.user.tel),1)]),t("tr",null,[s[5]||(s[5]=t("th",{scope:"row"},"Email",-1)),t("td",D,o(e.order.user.email),1)]),t("tr",null,[s[6]||(s[6]=t("th",{scope:"row"},"地址",-1)),t("td",null,o(e.order.user.address),1)]),s[7]||(s[7]=t("tr",null,[t("th",{scope:"row"},"匯款方式"),t("td",null,"信用卡")],-1)),s[8]||(s[8]=t("tr",null,[t("th",{scope:"row"},"匯款狀態"),t("td",{class:"text-danger"},"尚未付款")],-1))])])],32)]),t("div",P,[s[15]||(s[15]=t("h2",null,"訂單明細",-1)),s[16]||(s[16]=t("hr",null,null,-1)),t("div",_,[s[12]||(s[12]=t("h5",null,"訂單編號",-1)),t("span",null,o(e.order.id),1)]),t("div",k,[s[13]||(s[13]=t("h5",null,"訂購日期",-1)),t("span",null,o(e.order.create_at),1)]),(n(!0),i(w,null,x(e.productsData,r=>(n(),i("div",{class:"mb-4",key:r.id},[t("div",B,[t("p",null,[u(o(r.product.title),1),t("span",null," x "+o(r.qty),1)]),u("NT$ "+o(r.product.price),1)])]))),128)),t("div",N,[s[14]||(s[14]=t("h5",null,"共計",-1)),t("span",null,"NT$ "+o(e.order.total),1)]),t("button",{type:"submit",class:"btn btn-info rounded-0 w-100 mt-4",onClick:s[2]||(s[2]=(...r)=>d.payOrder&&d.payOrder(...r))},"確認送出")])])])])}const A=f(O,[["render",R]]);export{A as default};

import{_ as w,S as L,L as P,h as _,a as x,r as h,o as r,c,b as t,d as n,w as d,F as p,i as g,k as C,v as k,l as S,e as m,t as a,n as T}from"./index-yin_xtmD.js";import{P as E}from"./PaginationView-UGtI0Ewn.js";import{c as R}from"./cartStore-pWKnpFbl.js";/* empty css              */var V={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"kun123",BASE_URL:"/vuefinal/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:y,VITE_PATH:v}=V,I={data(){return{cart:[],products:[],categories:["1貓房","2貓房","4貓房","5貓房"],isLoading:!0,fullPage:!0,loader:"bars",Swal:L,pagination:{},currentCategory:{},searchInput:"",productCategory:"",search:""}},components:{Loading:P,Pagination:E},watch:{"$route.query":{handler(){this.getProducts()},deep:!0}},methods:{getProducts(){this.isLoading=!0;const{category:o=""}=this.$route.query;_.get(`${y}/v2/api/${v}/products?category=${o}`).then(e=>{this.products=e.data.products,this.pagination=e.data.pagination,this.isLoading=!1}).catch(e=>{this.$Swal.fire({icon:"error",title:e.response.data.message})}).finally(()=>{})},getCarts(){_.get(`${y}/v2/api/${v}/cart`).then(o=>{this.cart=o.data.data}).catch(o=>{this.$Swal.fire({icon:"error",title:o.response.data.message})}).finally(()=>{this.isLoading=!1})},productSearch(){this.searchInput!==""?this.products=this.productsSearch:this.getProducts()},productCategoryFilter(o){this.isLoading=!0,this.filterArea=[],this.category=o,this.category?(this.products=this.productsCategoryFilterResults,this.categoryFilterProducts=this.productsCategoryFilterResults,setTimeout(()=>{this.isLoading=!1},1e3)):this.getProductsList()},...x(R,["addToCart","getCart"])},computed:{productsSearch(){return this.products.filter(e=>e.title.toLowerCase().includes(this.searchInput.toLowerCase()))},productsCategoryFilterResults(){return this.products.filter(e=>e.category.toLowerCase().includes(this.category.toLowerCase()))}},mounted(){this.getProducts(),this.getCarts()}},F=t("div",{class:"aboutbanner mt-5",style:{"background-image":"url('images/roomforest.jpg')",height:"200px"}},[t("h2",{class:"text-info"},"貓咪旅館。")],-1),$={class:"bg-primary py-4"},U={class:"container text-info py-6 vl-parent"},A={class:"row py-md-6 py-sm-0"},B={class:"col-md-3 mb-6"},D={class:"position-sticky",style:{top:"5rem"}},N={class:"card text-center bg-secondary mb-2"},M=t("div",{class:"card-header py-3 text-info"}," 房型類別 ",-1),j={class:"list-group list-group-flush"},q={class:"list-group-item list"},H=t("p",{class:"my-auto"},"全部房型",-1),K={class:"input-group mt-3"},O=t("span",{class:"input-group-text bg-light border"},[t("i",{class:"bi bi-search my-auto"})],-1),z={class:"col-md-9 col-sm-12"},G={class:"row"},J={class:"col-3"},Q={class:"image-container"},W=["src"],X={class:"col-9 position-relative"},Y={class:"row mb-4"},Z={class:"col-md-8 col-sm-5 title"},tt={class:"py-4"},st={class:"card-title border-bottom mb-2"},et={class:"card-text mb-4"},ot={class:"badge bg-secondary"},it={class:"price col-md-4 p-md-3 text-end position-relative col-sm-6 p-sm-2"},at={key:0},rt={key:1},ct={class:"text-secondary"},nt={class:"card-text mb-7"},lt={class:"text-muted"},dt={class:"row"},ut={class:"col-8"},ht={class:"col-md-7 content"},pt={class:"col-4"},_t={class:"btn-group position-absolute",role:"group","aria-label":"Basic outlined example",style:{bottom:"10px",right:"25px"}},gt={type:"button",class:"btn btn-outline-primary btn-sm"},mt=["onClick"];function yt(o,e,vt,ft,i,u){const f=h("Loading"),l=h("RouterLink"),b=h("Pagination");return r(),c(p,null,[F,t("div",$,[t("div",U,[n(f,{active:i.isLoading,"onUpdate:active":e[0]||(e[0]=s=>i.isLoading=s),"can-cancel":!1,"is-full-page":i.fullPage,loader:i.loader},null,8,["active","is-full-page","loader"]),t("div",A,[t("div",B,[t("div",D,[t("div",N,[M,t("ul",j,[t("li",q,[n(l,{class:"py-2 nav-link",to:"/products"},{default:d(()=>[H]),_:1})]),(r(!0),c(p,null,g(i.categories,s=>(r(),c("li",{class:"list-group-item list",key:s},[n(l,{class:"py-2 nav-link link-hover",to:`/products?category=${s}`},{default:d(()=>[m(a(s),1)]),_:2},1032,["to"])]))),128))])]),t("div",K,[O,C(t("input",{type:"search",class:"form-control",placeholder:"輸入房型名稱","aria-label":"Search","onUpdate:modelValue":e[1]||(e[1]=s=>i.searchInput=s),onKeyup:e[2]||(e[2]=S((...s)=>u.productSearch&&u.productSearch(...s),["enter"]))},null,544),[[k,i.searchInput]])])])]),t("div",z,[(r(!0),c(p,null,g(i.products,s=>(r(),c("div",{class:"card mb-3",key:s.id},[t("div",G,[t("div",J,[t("div",Q,[n(l,{to:`/product/${s.id}`},{default:d(()=>[t("img",{src:s.imageUrl,class:"rounded-start object-fit-cover",alt:"...",width:"223",height:"300",style:{"z-index":"1"}},null,8,W)]),_:2},1032,["to"])])]),t("div",X,[t("div",Y,[t("div",Z,[t("div",tt,[t("h5",st,a(s.title),1),t("p",et,a(s.unit),1),t("span",ot,a(s.category),1)])]),t("div",it,[s.origin_price===s.price?(r(),c("h3",at,"NT$ "+a(s.price)+"/貓",1)):(r(),c("div",rt,[t("h3",ct,"NT$ "+a(s.price)+"/貓",1),t("del",nt,[t("small",lt,a(s.origin_price)+"/一貓",1)])]))])]),t("div",dt,[t("div",ut,[t("div",ht,a(s.content),1)]),t("div",pt,[t("div",_t,[t("button",gt,[n(l,{to:`/product/${s.id}`,class:"nav-link"},{default:d(()=>[m("查看更多")]),_:2},1032,["to"])]),t("button",{type:"button",class:"btn btn-primary",onClick:T(bt=>o.addToCart(s.id),["prevent"])}," 加入購物車 ",8,mt)])])])])])]))),128)),n(b,{pagination:i.pagination,onEmitPages:u.getProducts},null,8,["pagination","onEmitPages"])])])])])],64)}const Ct=w(I,[["render",yt]]);export{Ct as default};
